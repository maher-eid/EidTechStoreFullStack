{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SoftPro22\\\\MyApp2\\\\frontend\\\\src\\\\Pages\\\\AddProducts.js\",\n  _s = $RefreshSig$();\nimport { useState, useContext } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AddProducts() {\n  _s();\n  const {\n    isAuthenticated,\n    isAdmin,\n    loading\n  } = useContext(AuthContext);\n  const [name, setName] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: \"center\",\n        marginTop: 80\n      },\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 12\n    }, this);\n  }\n  if (!isAuthenticated() || !isAdmin()) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/products\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 12\n    }, this);\n  }\n  const handleAddProduct = async () => {\n    setError(\"\");\n    setSuccess(\"\");\n    if (!name || !price || !description || !image) {\n      setError(\"Please fill all fields\");\n      return;\n    }\n    try {\n      const formData = new FormData();\n      formData.append(\"name\", name);\n      formData.append(\"price\", price);\n      formData.append(\"description\", description);\n      formData.append(\"image\", image);\n      const res = await fetch(\"http://localhost:5000/products\", {\n        method: \"POST\",\n        body: formData\n      });\n      const data = await res.json();\n      if (!res.ok) {\n        setError(data.message || \"Failed to add product\");\n        return;\n      }\n      setName(\"\");\n      setPrice(\"\");\n      setDescription(\"\");\n      setImage(null);\n      setSuccess(\"Product added successfully \");\n    } catch (err) {\n      console.error(err);\n      setError(\"Server error\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 500,\n      margin: \"40px auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Add Product (Admin)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"green\"\n      },\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Product name\",\n      value: name,\n      onChange: e => setName(e.target.value),\n      style: {\n        width: \"100%\",\n        padding: 10,\n        marginBottom: 10\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      placeholder: \"Price\",\n      value: price,\n      onChange: e => setPrice(e.target.value),\n      style: {\n        width: \"100%\",\n        padding: 10,\n        marginBottom: 10\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      placeholder: \"Product description\",\n      value: description,\n      onChange: e => setDescription(e.target.value),\n      style: {\n        width: \"100%\",\n        padding: 10,\n        marginBottom: 10\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: e => setImage(e.target.files[0]),\n      style: {\n        width: \"100%\",\n        marginBottom: 20\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleAddProduct,\n      style: {\n        width: \"100%\",\n        padding: 12,\n        cursor: \"pointer\"\n      },\n      children: \"Add Product\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n_s(AddProducts, \"6v13ix2hkBzYpeZ20/MAs52jEz8=\");\n_c = AddProducts;\nvar _c;\n$RefreshReg$(_c, \"AddProducts\");","map":{"version":3,"names":["useState","useContext","Navigate","AuthContext","AddProducts","isAuthenticated","isAdmin","loading","name","setName","price","setPrice","description","setDescription","image","setImage","error","setError","success","setSuccess","textAlign","marginTop","handleAddProduct","formData","FormData","append","res","fetch","method","body","data","json","ok","message","err","console","maxWidth","margin","color","e","target","value","width","padding","marginBottom","files","cursor"],"sources":["C:/Users/SoftPro22/MyApp2/frontend/src/Pages/AddProducts.js"],"sourcesContent":["import { useState, useContext } from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nexport default function AddProducts() {\r\n  const { isAuthenticated, isAdmin, loading } = useContext(AuthContext);\r\n  const [name, setName] = useState(\"\");\r\n  const [price, setPrice] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [image, setImage] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n  if (loading) {\r\n    return <p style={{ textAlign: \"center\", marginTop: 80 }}>Loading...</p>;\r\n  }\r\n\r\n  if (!isAuthenticated() || !isAdmin()) {\r\n    return <Navigate to=\"/products\" replace />;\r\n  }\r\n\r\n  const handleAddProduct = async () => {\r\n    setError(\"\");\r\n    setSuccess(\"\");\r\n\r\n    if (!name || !price || !description || !image) {\r\n      setError(\"Please fill all fields\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"name\", name);\r\n      formData.append(\"price\", price);\r\n      formData.append(\"description\", description); \r\n      formData.append(\"image\", image);              \r\n\r\n      const res = await fetch(\"http://localhost:5000/products\", {\r\n        method: \"POST\",\r\n        body: formData,\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setError(data.message || \"Failed to add product\");\r\n        return;\r\n      }\r\n\r\n      setName(\"\");\r\n      setPrice(\"\");\r\n      setDescription(\"\");\r\n      setImage(null);\r\n      setSuccess(\"Product added successfully \");\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(\"Server error\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: 500, margin: \"40px auto\" }}>\r\n      <h2>Add Product (Admin)</h2>\r\n\r\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\r\n      {success && <p style={{ color: \"green\" }}>{success}</p>}\r\n\r\n      <input\r\n        placeholder=\"Product name\"\r\n        value={name}\r\n        onChange={(e) => setName(e.target.value)}\r\n        style={{ width: \"100%\", padding: 10, marginBottom: 10 }}\r\n      />\r\n\r\n      <input\r\n        type=\"number\"\r\n        placeholder=\"Price\"\r\n        value={price}\r\n        onChange={(e) => setPrice(e.target.value)}\r\n        style={{ width: \"100%\", padding: 10, marginBottom: 10 }}\r\n      />\r\n\r\n      <textarea\r\n        placeholder=\"Product description\"\r\n        value={description}\r\n        onChange={(e) => setDescription(e.target.value)}\r\n        style={{ width: \"100%\", padding: 10, marginBottom: 10 }}\r\n      />\r\n\r\n      <input\r\n        type=\"file\"\r\n        accept=\"image/*\"\r\n        onChange={(e) => setImage(e.target.files[0])}\r\n        style={{ width: \"100%\", marginBottom: 20 }}\r\n      />\r\n\r\n      <button\r\n        onClick={handleAddProduct}\r\n        style={{ width: \"100%\", padding: 12, cursor: \"pointer\" }}\r\n      >\r\n        Add Product\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}