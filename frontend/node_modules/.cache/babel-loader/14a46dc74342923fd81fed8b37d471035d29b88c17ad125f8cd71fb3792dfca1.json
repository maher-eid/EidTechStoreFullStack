{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SoftPro22\\\\MyApp2\\\\frontend\\\\src\\\\Pages\\\\AddProducts.js\",\n  _s = $RefreshSig$();\nimport { useState, useContext } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AddProducts() {\n  _s();\n  // ‚úÖ HOOKS FIRST (ALWAYS)\n  const {\n    user,\n    isAuthenticated,\n    loading\n  } = useContext(AuthContext);\n  const [name, setName] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [image, setImage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n\n  // ‚è≥ wait until auth loads\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 12\n    }, this);\n  }\n\n  // üîí protect page\n  if (!isAuthenticated() || !(user !== null && user !== void 0 && user.isAdmin)) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/products\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 12\n    }, this);\n  }\n  const handleAddProduct = async () => {\n    setError(\"\");\n    setSuccess(\"\");\n    if (!name || !price || !image) {\n      setError(\"Fill all fields\");\n      return;\n    }\n    try {\n      const formData = new FormData();\n      formData.append(\"name\", name);\n      formData.append(\"price\", price);\n      formData.append(\"description\", \"\"); // optional\n      formData.append(\"image\", image);\n      const res = await fetch(\"http://localhost:5000/products\", {\n        method: \"POST\",\n        body: formData\n      });\n      if (!res.ok) {\n        setError(\"Failed to add product\");\n        return;\n      }\n      setName(\"\");\n      setPrice(\"\");\n      setImage(\"\");\n      setSuccess(\"Product added successfully\");\n    } catch {\n      setError(\"Server error\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 500,\n      margin: \"40px auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Add Product (Admin)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"green\"\n      },\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Product name\",\n      value: name,\n      onChange: e => setName(e.target.value),\n      style: {\n        width: \"100%\",\n        padding: 10,\n        marginBottom: 10\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Price\",\n      value: price,\n      onChange: e => setPrice(e.target.value),\n      style: {\n        width: \"100%\",\n        padding: 10,\n        marginBottom: 10\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: e => setImage(e.target.files[0]),\n      style: {\n        width: \"100%\",\n        marginBottom: 20\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleAddProduct,\n      style: {\n        width: \"100%\",\n        padding: 12\n      },\n      children: \"Add Product\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n_s(AddProducts, \"uGLkiwelPbWBP61bMpCXgVl2glk=\");\n_c = AddProducts;\nvar _c;\n$RefreshReg$(_c, \"AddProducts\");","map":{"version":3,"names":["useState","useContext","Navigate","AuthContext","AddProducts","user","isAuthenticated","loading","name","setName","price","setPrice","image","setImage","error","setError","success","setSuccess","textAlign","isAdmin","handleAddProduct","formData","FormData","append","res","fetch","method","body","ok","maxWidth","margin","color","e","target","value","width","padding","marginBottom","files"],"sources":["C:/Users/SoftPro22/MyApp2/frontend/src/Pages/AddProducts.js"],"sourcesContent":["import { useState, useContext } from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nexport default function AddProducts() {\r\n  // ‚úÖ HOOKS FIRST (ALWAYS)\r\n  const { user, isAuthenticated, loading } = useContext(AuthContext);\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [price, setPrice] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n\r\n  // ‚è≥ wait until auth loads\r\n  if (loading) {\r\n    return <p style={{ textAlign: \"center\" }}>Loading...</p>;\r\n  }\r\n\r\n  // üîí protect page\r\n  if (!isAuthenticated() || !user?.isAdmin) {\r\n    return <Navigate to=\"/products\" replace />;\r\n  }\r\n\r\n  const handleAddProduct = async () => {\r\n    setError(\"\");\r\n    setSuccess(\"\");\r\n\r\n    if (!name || !price || !image) {\r\n      setError(\"Fill all fields\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"name\", name);\r\n      formData.append(\"price\", price);\r\n      formData.append(\"description\", \"\"); // optional\r\n      formData.append(\"image\", image);\r\n\r\n      const res = await fetch(\"http://localhost:5000/products\", {\r\n        method: \"POST\",\r\n        body: formData,\r\n      });\r\n\r\n      if (!res.ok) {\r\n        setError(\"Failed to add product\");\r\n        return;\r\n      }\r\n\r\n      setName(\"\");\r\n      setPrice(\"\");\r\n      setImage(\"\");\r\n      setSuccess(\"Product added successfully\");\r\n    } catch {\r\n      setError(\"Server error\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: 500, margin: \"40px auto\" }}>\r\n      <h2>Add Product (Admin)</h2>\r\n\r\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\r\n      {success && <p style={{ color: \"green\" }}>{success}</p>}\r\n\r\n      <input\r\n        placeholder=\"Product name\"\r\n        value={name}\r\n        onChange={(e) => setName(e.target.value)}\r\n        style={{ width: \"100%\", padding: 10, marginBottom: 10 }}\r\n      />\r\n\r\n      <input\r\n        placeholder=\"Price\"\r\n        value={price}\r\n        onChange={(e) => setPrice(e.target.value)}\r\n        style={{ width: \"100%\", padding: 10, marginBottom: 10 }}\r\n      />\r\n\r\n      <input\r\n        type=\"file\"\r\n        onChange={(e) => setImage(e.target.files[0])}\r\n        style={{ width: \"100%\", marginBottom: 20 }}\r\n      />\r\n\r\n      <button\r\n        onClick={handleAddProduct}\r\n        style={{ width: \"100%\", padding: 12 }}\r\n      >\r\n        Add Product\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}