{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SoftPro22\\\\MyApp2\\\\frontend\\\\src\\\\Pages\\\\AddProducts.js\",\n  _s = $RefreshSig$();\n// src/pages/AddProducts.jsx\nimport { useState, useContext } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AddProducts() {\n  _s();\n  const {\n    user,\n    isAuthenticated\n  } = useContext(AuthContext);\n\n  // ðŸ”’ hide page if not logged in or not admin\n  if (!isAuthenticated() || (user === null || user === void 0 ? void 0 : user.role) !== \"admin\") {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/products\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 12\n    }, this);\n  }\n  const [name, setName] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [image, setImage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const handleAddProduct = async () => {\n    setError(\"\");\n    setSuccess(\"\");\n    if (!name || !price || !image) {\n      setError(\"Fill all fields\");\n      return;\n    }\n    try {\n      const res = await fetch(\"http://localhost:5000/products\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${user.token}`\n        },\n        body: JSON.stringify({\n          name,\n          price,\n          image // image URL or key\n        })\n      });\n\n      const data = await res.json();\n      if (!res.ok) {\n        setError(data.message || \"Failed to add product\");\n        return;\n      }\n      setName(\"\");\n      setPrice(\"\");\n      setImage(\"\");\n      setSuccess(\"Product added successfully\");\n    } catch {\n      setError(\"Server error\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 500,\n      margin: \"40px auto\",\n      padding: 30\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Add Product (Admin)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"green\"\n      },\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Product name\",\n      value: name,\n      onChange: e => setName(e.target.value),\n      style: {\n        width: \"100%\",\n        padding: 10,\n        marginBottom: 10\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Price\",\n      value: price,\n      onChange: e => setPrice(e.target.value),\n      style: {\n        width: \"100%\",\n        padding: 10,\n        marginBottom: 10\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Image URL / key\",\n      value: image,\n      onChange: e => setImage(e.target.value),\n      style: {\n        width: \"100%\",\n        padding: 10,\n        marginBottom: 20\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleAddProduct,\n      style: {\n        width: \"100%\",\n        padding: 12,\n        cursor: \"pointer\"\n      },\n      children: \"Add Product\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n_s(AddProducts, \"u34vygFRDZTq1nvrycFQkIzDBh0=\");\n_c = AddProducts;\nvar _c;\n$RefreshReg$(_c, \"AddProducts\");","map":{"version":3,"names":["useState","useContext","Navigate","AuthContext","AddProducts","user","isAuthenticated","role","name","setName","price","setPrice","image","setImage","error","setError","success","setSuccess","handleAddProduct","res","fetch","method","headers","Authorization","token","body","JSON","stringify","data","json","ok","message","maxWidth","margin","padding","color","e","target","value","width","marginBottom","cursor"],"sources":["C:/Users/SoftPro22/MyApp2/frontend/src/Pages/AddProducts.js"],"sourcesContent":["// src/pages/AddProducts.jsx\r\nimport { useState, useContext } from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nexport default function AddProducts() {\r\n  const { user, isAuthenticated } = useContext(AuthContext);\r\n\r\n  // ðŸ”’ hide page if not logged in or not admin\r\n  if (!isAuthenticated() || user?.role !== \"admin\") {\r\n    return <Navigate to=\"/products\" replace />;\r\n  }\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [price, setPrice] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n\r\n  const handleAddProduct = async () => {\r\n    setError(\"\");\r\n    setSuccess(\"\");\r\n\r\n    if (!name || !price || !image) {\r\n      setError(\"Fill all fields\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/products\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${user.token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          name,\r\n          price,\r\n          image, // image URL or key\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setError(data.message || \"Failed to add product\");\r\n        return;\r\n      }\r\n\r\n      setName(\"\");\r\n      setPrice(\"\");\r\n      setImage(\"\");\r\n      setSuccess(\"Product added successfully\");\r\n    } catch {\r\n      setError(\"Server error\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: 500, margin: \"40px auto\", padding: 30 }}>\r\n      <h2>Add Product (Admin)</h2>\r\n\r\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\r\n      {success && <p style={{ color: \"green\" }}>{success}</p>}\r\n\r\n      <input\r\n        placeholder=\"Product name\"\r\n        value={name}\r\n        onChange={(e) => setName(e.target.value)}\r\n        style={{ width: \"100%\", padding: 10, marginBottom: 10 }}\r\n      />\r\n\r\n      <input\r\n        placeholder=\"Price\"\r\n        value={price}\r\n        onChange={(e) => setPrice(e.target.value)}\r\n        style={{ width: \"100%\", padding: 10, marginBottom: 10 }}\r\n      />\r\n\r\n      <input\r\n        placeholder=\"Image URL / key\"\r\n        value={image}\r\n        onChange={(e) => setImage(e.target.value)}\r\n        style={{ width: \"100%\", padding: 10, marginBottom: 20 }}\r\n      />\r\n\r\n      <button\r\n        onClick={handleAddProduct}\r\n        style={{ width: \"100%\", padding: 12, cursor: \"pointer\" }}\r\n      >\r\n        Add Product\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA;AACA,SAASA,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AAC5C,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,WAAW,QAAQ,wBAAwB;AAAC;AAErD,eAAe,SAASC,WAAW,GAAG;EAAA;EACpC,MAAM;IAAEC,IAAI;IAAEC;EAAgB,CAAC,GAAGL,UAAU,CAACE,WAAW,CAAC;;EAEzD;EACA,IAAI,CAACG,eAAe,EAAE,IAAI,CAAAD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEE,IAAI,MAAK,OAAO,EAAE;IAChD,oBAAO,QAAC,QAAQ;MAAC,EAAE,EAAC,WAAW;MAAC,OAAO;IAAA;MAAA;MAAA;MAAA;IAAA,QAAG;EAC5C;EAEA,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACU,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACc,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACgB,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAE1C,MAAMkB,gBAAgB,GAAG,YAAY;IACnCH,QAAQ,CAAC,EAAE,CAAC;IACZE,UAAU,CAAC,EAAE,CAAC;IAEd,IAAI,CAACT,IAAI,IAAI,CAACE,KAAK,IAAI,CAACE,KAAK,EAAE;MAC7BG,QAAQ,CAAC,iBAAiB,CAAC;MAC3B;IACF;IAEA,IAAI;MACF,MAAMI,GAAG,GAAG,MAAMC,KAAK,CAAC,gCAAgC,EAAE;QACxDC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE,kBAAkB;UAClCC,aAAa,EAAG,UAASlB,IAAI,CAACmB,KAAM;QACtC,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnBnB,IAAI;UACJE,KAAK;UACLE,KAAK,CAAE;QACT,CAAC;MACH,CAAC,CAAC;;MAEF,MAAMgB,IAAI,GAAG,MAAMT,GAAG,CAACU,IAAI,EAAE;MAE7B,IAAI,CAACV,GAAG,CAACW,EAAE,EAAE;QACXf,QAAQ,CAACa,IAAI,CAACG,OAAO,IAAI,uBAAuB,CAAC;QACjD;MACF;MAEAtB,OAAO,CAAC,EAAE,CAAC;MACXE,QAAQ,CAAC,EAAE,CAAC;MACZE,QAAQ,CAAC,EAAE,CAAC;MACZI,UAAU,CAAC,4BAA4B,CAAC;IAC1C,CAAC,CAAC,MAAM;MACNF,QAAQ,CAAC,cAAc,CAAC;IAC1B;EACF,CAAC;EAED,oBACE;IAAK,KAAK,EAAE;MAAEiB,QAAQ,EAAE,GAAG;MAAEC,MAAM,EAAE,WAAW;MAAEC,OAAO,EAAE;IAAG,CAAE;IAAA,wBAC9D;MAAA,UAAI;IAAmB;MAAA;MAAA;MAAA;IAAA,QAAK,EAE3BpB,KAAK,iBAAI;MAAG,KAAK,EAAE;QAAEqB,KAAK,EAAE;MAAM,CAAE;MAAA,UAAErB;IAAK;MAAA;MAAA;MAAA;IAAA,QAAK,EAChDE,OAAO,iBAAI;MAAG,KAAK,EAAE;QAAEmB,KAAK,EAAE;MAAQ,CAAE;MAAA,UAAEnB;IAAO;MAAA;MAAA;MAAA;IAAA,QAAK,eAEvD;MACE,WAAW,EAAC,cAAc;MAC1B,KAAK,EAAER,IAAK;MACZ,QAAQ,EAAG4B,CAAC,IAAK3B,OAAO,CAAC2B,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE;MACzC,KAAK,EAAE;QAAEC,KAAK,EAAE,MAAM;QAAEL,OAAO,EAAE,EAAE;QAAEM,YAAY,EAAE;MAAG;IAAE;MAAA;MAAA;MAAA;IAAA,QACxD,eAEF;MACE,WAAW,EAAC,OAAO;MACnB,KAAK,EAAE9B,KAAM;MACb,QAAQ,EAAG0B,CAAC,IAAKzB,QAAQ,CAACyB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE;MAC1C,KAAK,EAAE;QAAEC,KAAK,EAAE,MAAM;QAAEL,OAAO,EAAE,EAAE;QAAEM,YAAY,EAAE;MAAG;IAAE;MAAA;MAAA;MAAA;IAAA,QACxD,eAEF;MACE,WAAW,EAAC,iBAAiB;MAC7B,KAAK,EAAE5B,KAAM;MACb,QAAQ,EAAGwB,CAAC,IAAKvB,QAAQ,CAACuB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE;MAC1C,KAAK,EAAE;QAAEC,KAAK,EAAE,MAAM;QAAEL,OAAO,EAAE,EAAE;QAAEM,YAAY,EAAE;MAAG;IAAE;MAAA;MAAA;MAAA;IAAA,QACxD,eAEF;MACE,OAAO,EAAEtB,gBAAiB;MAC1B,KAAK,EAAE;QAAEqB,KAAK,EAAE,MAAM;QAAEL,OAAO,EAAE,EAAE;QAAEO,MAAM,EAAE;MAAU,CAAE;MAAA,UAC1D;IAED;MAAA;MAAA;MAAA;IAAA,QAAS;EAAA;IAAA;IAAA;IAAA;EAAA,QACL;AAEV;AAAC,GAzFuBrC,WAAW;AAAA,KAAXA,WAAW;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}